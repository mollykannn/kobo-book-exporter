(function(e){function t(t){for(var o,c,a=t[0],l=t[1],s=t[2],d=0,f=[];d<a.length;d++)c=a[d],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&f.push(i[c][0]),i[c]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,s||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,a=1;a<n.length;a++){var l=n[a];0!==i[l]&&(o=!1)}o&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},i={app:0},r=[];function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var s=0;s<a.length;s++)t(a[s]);var u=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},10:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("f2bf");function i(e,t){var n=Object(o["u"])("router-view");return Object(o["p"])(),Object(o["d"])(n)}const r={};r.render=i;var c=r,a=n("6c02"),l={class:"container"},s=Object(o["g"])("h1",{class:"title"},"Kobo Book Exporter",-1),u={class:"file"},d=Object(o["g"])("span",{class:"small"},"* Connect your kobo reader to a computer. You can find .kobo directory (hidden by default). There should be a KoboReader.sqlite file. Drop a file here.",-1),f={key:0,class:"content"},b={class:"content-left"},p={class:"download-booklist"},h={class:"booklist"},g={class:"booklist-scroll"},O={class:"content-right"},j={class:"highlight-preview"},v={key:0,class:"highlight-details"},m={class:"highlight-title"},y=Object(o["f"])('<footer class="footer"> Created by <a href="https://github.com/mollykannn">Molly Kan</a> / Reference from <a href="http://www.vixual.net/blog/archives/117">Kobo Exporter: 匯出 Kobo 電子書的書籍清單與註記資料 (劃線與筆記) | Vixual</a><br> Icons made by <a href="http://www.freepik.com/" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a></footer>',1);function L(e,t,n,i,r,c){return Object(o["p"])(),Object(o["d"])("div",l,[s,Object(o["g"])("div",u,[Object(o["g"])("div",{class:"file-upload",onClick:t[1]||(t[1]=Object(o["B"])((function(t){return e.$refs.fileInput.click()}),["prevent"])),onDragover:t[2]||(t[2]=Object(o["B"])((function(){}),["prevent"])),onDrop:t[3]||(t[3]=Object(o["B"])((function(){return i.importFile&&i.importFile.apply(i,arguments)}),["prevent"]))},Object(o["w"])(i.fileName),33),Object(o["g"])("input",{type:"file",ref:"fileInput",class:"hide",onChange:t[4]||(t[4]=function(){return i.importFile&&i.importFile.apply(i,arguments)})},null,544),d]),i.exportBookListData.loading?(Object(o["p"])(),Object(o["d"])("div",f,[Object(o["g"])("div",b,[Object(o["g"])("div",p,[Object(o["g"])("button",{onClick:t[5]||(t[5]=function(e){return i.downloadBookList("json")})},"JSON file"),Object(o["g"])("button",{onClick:t[6]||(t[6]=function(e){return i.downloadBookList("md")})},"Markdown file"),Object(o["g"])("button",{onClick:t[7]||(t[7]=function(e){return i.downloadBookList("csv")})},"CSV file")]),Object(o["g"])("div",h,[Object(o["g"])("div",g,[(Object(o["p"])(!0),Object(o["d"])(o["a"],null,Object(o["t"])(i.bookTitleList,(function(e){return Object(o["p"])(),Object(o["d"])("div",{key:e.index,class:"bookTitle",onClick:function(t){return i.previewHighlight(e[0],e[1])}},Object(o["w"])(e[1]),9,["onClick"])})),128))])])]),Object(o["g"])("div",O,[Object(o["g"])("div",j,[i.exportHighlightData.loading?(Object(o["p"])(),Object(o["d"])("div",v,[Object(o["g"])("div",m,Object(o["w"])(i.exportHighlightData.title),1),i.exportHighlightData.content?(Object(o["p"])(),Object(o["d"])("button",{key:0,class:"highlight-export",onClick:t[8]||(t[8]=function(e){return i.exportFile("".concat(i.exportHighlightData.title,".md"),i.exportHighlightData.content)})},"Export")):Object(o["e"])("",!0)])):Object(o["e"])("",!0),Object(o["A"])(Object(o["g"])("textarea",{class:"highlight-textarea","onUpdate:modelValue":t[9]||(t[9]=function(e){return i.exportHighlightData.content=e})},null,512),[[o["y"],i.exportHighlightData.content]])])])])):Object(o["e"])("",!0),y])}n("b0c0"),n("d3b7"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("ac1f"),n("ddb0"),n("159b"),n("a15b"),n("1276"),n("25f0"),n("b64b"),n("d81d"),n("07ac");var E=n("fdac4"),N=n.n(E),k={name:"Home",setup:function(){var e=Object(o["s"])("Drop your .sqlite file here"),t=Object(o["s"])(),n=Object(o["r"])({loading:!1,content:""}),i=Object(o["r"])({loading:!1,title:"",content:""}),r=Object(o["s"])();function c(o){var i=o.target.files||o.dataTransfer.files,c=new FileReader;e.value=i[0].name,c.onload=function(){N()().then((function(e){var o=new e.Database(new Uint8Array(c.result));t.value=o;var i=[];o.each("SELECT\n              IFNULL(Title,'') as 'Book Title', \n              IFNULL(Subtitle,'') as 'Sub Title', \n              IFNULL(Attribution,'') as 'Author', \n              IFNULL(Publisher,'') as 'Publisher', \n              IFNULL(ISBN,0) as 'ISBN', \n              IFNULL(date(DateCreated),'') as 'Release Date',\n              IFNULL(Series,'') as 'Series', \n              IFNULL(SeriesNumber,0) as 'SeriesNumber', \n              IFNULL(AverageRating,0) as 'Rating', \n              IFNULL(___PercentRead,0) as 'ReadPercent',\n              IFNULL(CASE WHEN ReadStatus>0 THEN datetime(DateLastRead) END,'') as 'Last Read',\n              IFNULL(___FileSize,0) as 'File Size',\n              IFNULL(CASE WHEN Accessibility=1 THEN 'Store' ELSE CASE WHEN Accessibility=-1 THEN 'Import' ELSE CASE WHEN Accessibility=6 THEN 'Preview' ELSE 'Other' END END END,'') as 'Source'\n            FROM content\n              WHERE ContentType=6 AND ___UserId IS NOT NULL AND ___UserId != '' AND ___UserId != 'removed'\n              ORDER BY Source desc, Title",{},(function(e){i.push(e)})),n.loading=!0,n.content=i;var a=o.exec("SELECT \n              ContentID, \n              Title\n            FROM content \n            WHERE ContentType = 6 AND ___UserId IS NOT NULL AND ___UserId != '' AND ___UserId != 'removed'\n            ORDER BY DateLastRead DESC");r.value=a[0].values}))},c.readAsArrayBuffer(i[0])}function a(e){var t="bookList.".concat(e),o="";"json"===e?o=JSON.stringify(n.content):"md"===e?n.content.forEach((function(e,t){0===t&&(o+="| ".concat(Object.keys(e).toString().split(",").join(" | ")," |\n"),o+="".concat(Object.keys(e).map((function(){return"| --- "})).toString().split(",").join(""),"|\n")),o+="| ".concat(Object.values(e).toString().split(",").join(" | ")," |\n")})):n.content.forEach((function(e,t){o+=0===t?'"'.concat(Object.keys(e).join('","'),'"\n'):"",o+='"'.concat(Object.values(e).join('","'),'"\n')})),s(t,o)}function l(e,n){var o,r=t.value.exec("SELECT \n        '#' || row_number() over (partition by B.Title order by T.ContentID, T.ChapterProgress), \n        TRIM(REPLACE(REPLACE(T.Text,CHAR(10),''),CHAR(9),''))\n        FROM content AS B, bookmark AS T\n        WHERE B.ContentID = T.VolumeID AND T.Text != '' AND T.Hidden = 'false' AND B.ContentID = '".concat(e,"'\n        ORDER BY T.ContentID, T.ChapterProgress;"));i.loading=!0,i.title=n,i.content=null===(o=r[0])||void 0===o?void 0:o.values.join("\n\n").split(",").join("  \n")}function s(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}return{fileName:e,dbData:t,exportBookListData:n,exportHighlightData:i,bookTitleList:r,importFile:c,exportFile:s,downloadBookList:a,previewHighlight:l}}};k.render=L;var w=k,D=[{path:"/",name:"Home",component:w}],S=Object(a["a"])({history:Object(a["b"])("/"),routes:D}),C=S,T=(n("6418"),n("9483"));Object(T["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),Object(o["c"])(c).use(C).mount("#app")},6:function(e,t){},6418:function(e,t,n){},7:function(e,t){},8:function(e,t){},9:function(e,t){}});